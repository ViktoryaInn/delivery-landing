const INPUT_LOGIN_ERROR="Введите действительный электронный адрес",INPUT_PASSWORD_ERROR="Введите пароль";let inputLogin=document.getElementById("modal-input-login"),inputPassword=document.getElementById("modal-input-password"),modalSubmitBtn=document.getElementById("modal-submit-button"),loginError=document.getElementById("input-error-login"),passwordError=document.getElementById("input-error-password");function validateLogin(e){return/\S+@\S+\.\S+/.test(e)}function validatePassword(e){return/(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{6,}/.test(e)}function enableError(e,t,o){t.innerHTML=o,e.classList.add("input-highlight"),modalSubmitBtn.classList.add("submit-disabled"),modalSubmitBtn.disabled=!0,console.log("pidoras")}function disableError(e,t){t.innerHTML="",e.classList.remove("input-highlight"),modalSubmitBtn.classList.remove("submit-disabled"),modalSubmitBtn.disabled=!1,console.log("none-pidoras")}inputLogin.addEventListener("blur",()=>{validateLogin(inputLogin.value)&&inputLogin.value.length>0?disableError(inputLogin,loginError):enableError(inputLogin,loginError,INPUT_LOGIN_ERROR)}),inputPassword.addEventListener("blur",()=>{validatePassword(inputPassword.value)&&inputPassword.value.length>0?disableError(inputPassword,passwordError):enableError(inputPassword,passwordError,"Введите пароль")});let buttonLogin=document.getElementById("login__btn"),modalWindow=document.querySelector(".modal__window"),buttonClose=document.getElementById("close_btn");buttonLogin.addEventListener("click",()=>{console.log("something"),modalWindow.classList.toggle("modal__window--active")}),buttonClose.addEventListener("click",()=>{console.log("close"),modalWindow.classList.toggle("modal__window--active")}),window.addEventListener("click",e=>{e.target==modalWindow&&modalWindow.classList.toggle("modal__window--active")});let slider=document.querySelector(".slider"),sliderContainer=document.querySelector(".slider__items"),sliderItems=document.querySelectorAll("div.slider__item");console.log(sliderItems.length);let indicatorItems,timerId,indicatorIndex=0,indicatorIndexMax=sliderItems.length-1,currentPosition=0,transformValue=0,transformStep=100,itemsArray=[];for(let e=0;e<sliderItems.length;e++)itemsArray.push({item:sliderItems[e],position:e,transform:0});console.log(itemsArray);let position={getItemIndex:function(e){console.log("get item index");let t=0;for(let o=0;o<itemsArray.length;o++)(itemsArray[o].position<itemsArray[t].position&&"min"===e||itemsArray[o].position>itemsArray[t].position&&"max"===e)&&(t=o);return t},getItemPosition:function(e){return console.log("get item position"),itemsArray[position.getItemIndex(e)].position}};function moveSlide(e){let t;console.log("move slide");let o=indicatorIndex;"next"===e?(currentPosition++,currentPosition>position.getItemPosition("max")&&(t=position.getItemIndex("min"),itemsArray[t].position=position.getItemPosition("max")+1,itemsArray[t].transform+=100*itemsArray.length,itemsArray[t].item.style.transform=`translateX(${itemsArray[t].transform}%)`),transformValue-=transformStep,indicatorIndex+=1,indicatorIndex>indicatorIndexMax&&(indicatorIndex=0)):(currentPosition--,currentPosition<position.getItemPosition("min")&&(t=position.getItemIndex("max"),itemsArray[t].position=position.getItemPosition("min")-1,itemsArray[t].transform-=100*itemsArray.length,itemsArray[t].item.style.transform=`translateX(${itemsArray[t].transform}%)`),transformValue+=transformStep,indicatorIndex--,indicatorIndex<0&&(indicatorIndex=indicatorIndexMax)),sliderContainer.style.transform=`translateX(${transformValue}%)`,indicatorItems[o].classList.remove("active"),indicatorItems[indicatorIndex].classList.add("active")}function moveTo(e){let t=0,o=e>indicatorIndex?"next":"prev";for(;e!=indicatorIndex&&t<=indicatorIndexMax;)moveSlide(o),t++}let defaultDirection="next",delayAutoPlay=5e3;function startAutoPlay(){stopAutoPlay(),console.log("start auto play"),timerId=setInterval(()=>moveSlide(defaultDirection),delayAutoPlay)}function stopAutoPlay(){clearInterval(timerId)}function addIndicators(){let e=document.createElement("ol");e.classList.add("slider__indicators");for(let t=0;t<sliderItems.length;t++){let o=document.createElement("li");0===t&&o.classList.add("active"),o.setAttribute("data-slide-to",t),e.appendChild(o)}slider.appendChild(e),indicatorItems=slider.querySelectorAll(".slider__indicators > li")}slider.addEventListener("click",e=>{e.target.getAttribute("data-slide-to")&&(e.preventDefault(),moveTo(parseInt(e.target.getAttribute("data-slide-to"))),startAutoPlay())}),window.onload=function(){startAutoPlay(),addIndicators()};const NULL_TEXT_ERROR="Введите текст новости",IMAGE_FORMAT_ERROR="Неверный формат изображения",TEXTAREA_LIMIT_ERROR="Превышен лимит символов";let textareaInput=document.querySelector(".add__textarea"),textareaInfo=document.querySelector(".add__form-textarea-info"),errorBlock=document.querySelector(".form__add__error"),submitButton=document.querySelector(".form__add-btn"),addImgBtn=document.querySelector(".form__add-img");function checkTextareaLenght(){0!=textareaInput.value.length?(textareaInfo.classList.add("add__form-textarea-info--active"),addImgBtn.style="margin-top: 6px;"):(textareaInfo.classList.remove("add__form-textarea-info--active"),addImgBtn.style="margin-top: 21px;")}textareaInput.onkeyup=()=>{checkTextareaLenght(),textareaInfo.innerHTML=`Символов: ${textareaInput.value.length}/150`,textareaInput.value.length>150?(textareaInfo.innerHTML=`Символов: <span class="highlight">${textareaInput.value.length}</span>/150`,errorBlock.innerHTML=TEXTAREA_LIMIT_ERROR):dropError()};let uploadInput=document.getElementById("upload_image_input"),dropImage=document.querySelector(".form__add__uploaded-img_close-btn"),addForm=document.querySelector(".add__form"),uploadedImage={container:document.querySelector(".form__add__uploaded-img__container"),icon:document.querySelector(".form__add__uploaded-img-icon"),name:document.querySelector(".form__add__uploaded-img-name")},fileReader=new FileReader,image=new Image,imageData={url:null,fileName:null};uploadInput.addEventListener("change",()=>{console.log("change");let e=uploadInput.files[0];e.type&&-1!=e.type.search("image/+(jpeg|png)")?(fileReader.readAsDataURL(e),imageData.fileName=e.name,dropError(),e.name.length>20&&(imageData.fileName=imageData.filename.slice(0,20)+"..."+e.type.match("jpeg|png"))):errorBlock.innerHTML=IMAGE_FORMAT_ERROR}),fileReader.addEventListener("load",e=>{console.log("load1");let t=e.target.result;image.src=t,imageData.url=t});let displayUploadedImage=()=>{uploadedImage.container.classList.toggle("form__add__uploaded-img__container--active"),uploadedImage.icon.src=imageData.url,uploadedImage.name.innerHTML=imageData.fileName};function removeImage(){uploadInput.value=null,imageData.fileName=null,imageData.url=null}function dropError(){errorBlock.innerHTML=""}image.addEventListener("load",(function(){console.log("load2");let e=this.width,t=this.height;e&&t&&e<=270&&t<=270?(displayUploadedImage(),dropError()):(errorBlock.innerHTML=IMAGE_FORMAT_ERROR,removeImage())})),dropImage.addEventListener("click",e=>{e.preventDefault(),uploadedImage.container.classList.toggle("form__add__uploaded-img__container--active"),removeImage()}),submitButton.addEventListener("click",e=>{e.preventDefault(),0===textareaInput.value.length?errorBlock.innerHTML=NULL_TEXT_ERROR:(dropError(),addForm.submit())});