let buttonLogin=document.getElementById("login__btn"),modalWindow=document.querySelector(".modal__window"),buttonClose=document.getElementById("close_btn");buttonLogin.addEventListener("click",()=>{console.log("something"),modalWindow.classList.toggle("modal__window--active")}),buttonClose.addEventListener("click",()=>{console.log("close"),modalWindow.classList.toggle("modal__window--active")}),window.addEventListener("click",e=>{e.target==modalWindow&&modalWindow.classList.toggle("modal__window--active")});const NULL_TEXT_ERROR="Введите текст новости",IMAGE_FORMAT_ERROR="Неверный формат изображения",TEXTAREA_LIMIT_ERROR="Превышен лимит символов";let textareaInput=document.querySelector(".add__textarea"),textareaInfo=document.querySelector(".add__form-textarea-info"),errorBlock=document.querySelector(".form__add__error"),submitButton=document.querySelector(".form__add-btn"),addImgBtn=document.querySelector(".form__add-img");function checkTextareaLenght(){0!=textareaInput.value.length?(textareaInfo.classList.add("add__form-textarea-info--active"),addImgBtn.style="margin-top: 6px;"):(textareaInfo.classList.remove("add__form-textarea-info--active"),addImgBtn.style="margin-top: 21px;")}textareaInput.onkeyup=()=>{checkTextareaLenght(),textareaInfo.innerHTML="Символов: "+textareaInput.value.length+"/150",textareaInput.value.length>150?(textareaInfo.innerHTML='Символов: <span class="highlight">'+textareaInput.value.length+"</span>/150",errorBlock.innerHTML=TEXTAREA_LIMIT_ERROR):dropError()};let uploadInput=document.getElementById("upload_image_input"),dropImage=document.querySelector(".form__add__uploaded-img_close-btn"),uploadedImage={container:document.querySelector(".form__add__uploaded-img__container"),icon:document.querySelector(".form__add__uploaded-img-icon"),name:document.querySelector(".form__add__uploaded-img-name")},fileReader=new FileReader,image=new Image,imageData={url:null,fileName:null};uploadInput.addEventListener("change",()=>{console.log("change");let e=uploadInput.files[0];e.type&&-1!=e.type.search("image/+(jpeg|png)")?(fileReader.readAsDataURL(e),imageData.fileName=e.name,dropError(),e.name.length>20&&(imageData.fileName=imageData.filename.slice(0,20)+"..."+e.type.match("jpeg|png"))):errorBlock.innerHTML=IMAGE_FORMAT_ERROR}),fileReader.addEventListener("load",e=>{console.log("load1");let a=e.target.result;image.src=a,imageData.url=a});let displayUploadedImage=()=>{uploadedImage.container.classList.toggle("form__add__uploaded-img__container--active"),uploadedImage.icon.src=imageData.url,uploadedImage.name.innerHTML=imageData.fileName};function dropError(){errorBlock.innerHTML=""}image.addEventListener("load",(function(){console.log("load2");let e=this.width,a=this.height;e&&a&&e<=270&&a<=270?(displayUploadedImage(),dropError()):errorBlock.innerHTML=IMAGE_FORMAT_ERROR})),dropImage.addEventListener("click",e=>{e.preventDefault(),uploadedImage.container.classList.toggle("form__add__uploaded-img__container--active"),uploadInput.value=null,imageData.fileName=null,imageData.url=null}),submitButton.addEventListener("click",e=>{e.preventDefault(),0===textareaInput.value.length?(textareaInput.style.color="red",console.log("why??",textareaInput.value),console.log(textareaInput.value.length)):dropError()});